<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="√âmulateur de terminal Unix interactif avec connexion satellite simul√©e. Exp√©rimentez les commandes Linux dans votre navigateur.">
  <meta name="keywords" content="terminal, unix, linux, √©mulateur, shell, commandes, satellite">
  <meta name="author" content="Emmanche">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Terminal Unix √âmulateur">
  <meta property="og:description" content="√âmulateur de terminal Unix interactif avec connexion satellite simul√©e">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Terminal Unix √âmulateur">
  <meta name="twitter:description" content="√âmulateur de terminal Unix interactif avec connexion satellite simul√©e">
  
  <title>Terminal Unix √âmulateur - Connexion Satellite</title>
  
  <!-- Preconnect pour optimiser le chargement des polices -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg-primary: #000;
      --bg-secondary: #111;
      --border-color: #333;
      --text-primary: #eee;
      --text-secondary: #f8f8f2;
      --prompt-color: #50fa7b;
      --error-color: #ff5555;
      --cursor-color: #fff;
      --shadow-color: #222;
      --font-terminal: 'VT323', monospace;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      background: var(--bg-primary);
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
    }
    
    .terminal-container {
      margin-top: 20px;
      background: var(--bg-secondary);
      border: 2px solid var(--border-color);
      box-shadow: 0 0 24px var(--shadow-color);
      border-radius: 8px;
      padding: 0;
      width: 700px;
      height: 400px;
      min-width: 320px;
      min-height: 200px;
      max-width: 98vw;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      font-family: var(--font-terminal);
      position: relative;
    }
    
    .terminal-header {
      background: var(--border-color);
      padding: 8px 12px;
      border-radius: 6px 6px 0 0;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .terminal-button {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
    }
    
    .terminal-button.close { background: #ff5f56; }
    .terminal-button.minimize { background: #ffbd2e; }
    .terminal-button.maximize { background: #27c93f; }
    
    .terminal {
      background: var(--bg-secondary);
      color: var(--text-primary);
      padding: 24px;
      font-size: 1.5em;
      flex: 1;
      outline: none;
      white-space: pre-wrap;
      overflow-y: auto;
      overflow-x: hidden;
      border-radius: 0 0 8px 8px;
      word-break: break-word;
      line-height: 1.4;
    }
    
    .terminal::-webkit-scrollbar {
      width: 8px;
    }
    
    .terminal::-webkit-scrollbar-track {
      background: var(--bg-secondary);
    }
    
    .terminal::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 4px;
    }
    
    .terminal::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
    
    .prompt {
      color: var(--prompt-color);
      display: inline;
      font-weight: bold;
    }
    
    .input {
      color: var(--cursor-color);
      display: inline;
    }
    
    .output {
      color: var(--text-secondary);
      display: block;
      margin: 0.2em 0;
    }
    
    .error {
      color: var(--error-color);
      display: block;
      margin: 0.2em 0;
    }
    
    .success {
      color: var(--prompt-color);
      display: block;
      margin: 0.2em 0;
    }
    
    .cursor {
      display: inline-block;
      width: 0.6ch;
      background: var(--cursor-color);
      color: var(--bg-secondary);
      animation: blink 1s steps(1) infinite;
      vertical-align: baseline;
    }
    
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
    
    .hidden-input {
      position: absolute;
      top: -9999px;
      left: -9999px;
      opacity: 0;
      pointer-events: none;
    }
    
    @media (max-width: 800px) {
      body {
        padding: 10px;
      }
      
      .terminal-container {
        width: 100%;
        height: 70vh;
        margin-top: 10px;
      }
      
      .terminal {
        font-size: 1.2em;
        padding: 12px;
      }
    }
    
    @media (max-width: 480px) {
      .terminal {
        font-size: 1em;
        padding: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="terminal-container" role="application" aria-label="√âmulateur de terminal Unix">
    <div class="terminal-header" aria-hidden="true">
      <span class="terminal-button close"></span>
      <span class="terminal-button minimize"></span>
      <span class="terminal-button maximize"></span>
    </div>
    <div class="terminal" id="terminal" tabindex="0" aria-live="polite" aria-atomic="false"></div>
    <form id="terminal-form" autocomplete="off" style="margin:0;">
      <input 
        id="terminal-input" 
        type="text" 
        autocomplete="off" 
        autocapitalize="off" 
        spellcheck="false"
        aria-label="Entr√©e de commande terminal"
        class="hidden-input"
      />
    </form>
  </div>
  
  <script>
    'use strict';
    
    // Configuration
    const CONFIG = {
      connectionDelay: 800,
      cursorBlinkRate: 1000,
      maxHistorySize: 100
    };
    
    // √âtat de l'application
    const state = {
      terminal: document.getElementById('terminal'),
      inputEl: document.getElementById('terminal-input'),
      formEl: document.getElementById('terminal-form'),
      history: [],
      commandHistory: [],
      commandHistoryIndex: -1,
      input: '',
      cwd: '~',
      connected: false,
      username: 'root',
      hostname: 'ubuntu',
      fileSystem: {
        '~': ['Documents', 'Downloads', 'Music', 'Pictures', 'Videos', 'readme.txt'],
        '~/Documents': ['project.txt', 'notes.md'],
        '~/Downloads': ['file.zip']
      }
    };
    
    // Utilitaires
    const utils = {
      escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      },
      
      getCurrentTime() {
        return new Date().toLocaleString('fr-FR');
      },
      
      formatPath(path) {
        return path.replace(/^~/, '/root');
      }
    };
    
    // G√©n√©rateur de prompt
    function getPrompt() {
      return `<span class='prompt'>${state.username}@${state.hostname}:${state.cwd}$</span> <span class='input'>${utils.escapeHtml(state.input)}</span><span class='cursor'>&nbsp;</span>`;
    }
    
    // Rendu du terminal
    function render() {
      if (!state.connected) {
        state.terminal.innerHTML = connectionSequence.join('');
        state.inputEl.style.display = 'none';
      } else {
        state.terminal.innerHTML = state.history.join('') + getPrompt();
        state.inputEl.style.display = 'block';
        state.inputEl.value = state.input;
      }
      state.terminal.scrollTop = state.terminal.scrollHeight;
    }
    
    // S√©quence de connexion satellite
    const connectionSteps = [
      'Initializing satellite uplink...',
      'Establishing secure channel...',
      'Authenticating remote node...',
      'Synchronizing orbital parameters...',
      'Locking signal...',
      'Calibrating transmission...',
      'Handshake with ground station...',
      'Verifying encryption...',
      'Connection stable.',
      'Satellite link established.',
      '',
      'Type "help" for available commands.'
    ];
    
    let connectionSequence = [];
    
    function runConnectionSequence() {
      let i = 0;
      connectionSequence = [];
      render();
      
      function nextStep() {
        if (i < connectionSteps.length) {
          const className = i === connectionSteps.length - 2 ? 'success' : 'output';
          connectionSequence.push(`<span class='${className}'>${connectionSteps[i]}</span>\n`);
          render();
          i++;
          setTimeout(nextStep, CONFIG.connectionDelay);
        } else {
          state.connected = true;
          render();
          state.inputEl.focus();
        }
      }
      nextStep();
    }
    
    // Commandes disponibles
    const commands = {
      ls(args) {
        const path = state.cwd;
        const files = state.fileSystem[path] || [];
        return files.length > 0 
          ? `<span class="output">${files.join('  ')}</span>`
          : `<span class="output"></span>`;
      },
      
      pwd() {
        return `<span class="output">${utils.formatPath(state.cwd)}</span>`;
      },
      
      whoami() {
        return `<span class="output">${state.username}</span>`;
      },
      
      echo(args) {
        return `<span class="output">${utils.escapeHtml(args.slice(1).join(' '))}</span>`;
      },
      
      clear() {
        state.history = [];
        return null;
      },
      
      ping(args) {
        const target = args[1] || 'localhost';
        return `<span class="output">PING ${utils.escapeHtml(target)}: 56 data bytes
64 bytes from ${utils.escapeHtml(target)}: icmp_seq=1 ttl=64 time=0.045 ms
64 bytes from ${utils.escapeHtml(target)}: icmp_seq=2 ttl=64 time=0.042 ms
--- ${utils.escapeHtml(target)} ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms</span>`;
      },
      
      help() {
        return `<span class="output">Commandes disponibles:
  ls          - Liste les fichiers
  pwd         - Affiche le r√©pertoire courant
  whoami      - Affiche l'utilisateur actuel
  echo [text] - Affiche du texte
  clear       - Efface l'√©cran
  ping [host] - Teste la connexion r√©seau
  date        - Affiche la date et l'heure
  uname       - Affiche les informations syst√®me
  cat [file]  - Affiche le contenu d'un fichier
  cd [dir]    - Change de r√©pertoire
  help        - Affiche cette aide
  exit        - Ferme la session</span>`;
      },
      
      date() {
        return `<span class="output">${utils.getCurrentTime()}</span>`;
      },
      
      uname(args) {
        const flag = args[1];
        if (flag === '-a') {
          return `<span class="output">Linux ${state.hostname} 5.15.0-satellite x86_64 GNU/Linux</span>`;
        }
        return `<span class="output">Linux</span>`;
      },
      
      cat(args) {
        if (!args[1]) {
          return `<span class="error">cat: missing file operand</span>`;
        }
        const filename = args[1];
        const files = state.fileSystem[state.cwd] || [];
        if (files.includes(filename)) {
          if (filename === 'readme.txt') {
            return `<span class="output">Bienvenue sur le terminal satellite!
Ce syst√®me est connect√© via liaison satellite.
Utilisez 'help' pour voir les commandes disponibles.</span>`;
          }
          return `<span class="output">Contenu de ${utils.escapeHtml(filename)}</span>`;
        }
        return `<span class="error">cat: ${utils.escapeHtml(filename)}: No such file or directory</span>`;
      },
      
      cd(args) {
        if (!args[1]) {
          state.cwd = '~';
          return '';
        }
        const newPath = args[1] === '..' ? '~' : args[1];
        if (state.fileSystem[newPath]) {
          state.cwd = newPath;
          return '';
        }
        return `<span class="error">cd: ${utils.escapeHtml(args[1])}: No such file or directory</span>`;
      },
      
      exit() {
        return `<span class="success">Session termin√©e. D√©connexion satellite...</span>`;
      },
      
      // Easter egg: commande secr√®te matrix
      matrix() {
        const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥';
        let output = '<span class="success">';
        for (let i = 0; i < 15; i++) {
          for (let j = 0; j < 60; j++) {
            output += chars[Math.floor(Math.random() * chars.length)];
          }
          output += '\n';
        }
        output += '\nWake up, Neo...\nThe Matrix has you...\nFollow the white rabbit.\n</span>';
        return output;
      },
      
      // Easter egg: commande secr√®te hack
      hack() {
        return `<span class="success">Initializing hack sequence...
[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100%
Access granted.
You are now root on mainframe.
Just kidding! üòÑ</span>`;
      },
      
      // Easter egg: commande secr√®te coffee
      coffee() {
        return `<span class="output">
        (  )   (   )  )
         ) (   )  (  (
         ( )  (    ) )
         _____________
        <_____________> ___
        |             |/ _ \\
        |               | | |
        |               |_| |
     ___|             |\\___/
    /    \\___________/    \\
    \\_____________________/

Voici votre caf√© ‚òï Bonne d√©gustation !</span>`;
      },
      
      // Easter egg: commande secr√®te sudo
      sudo(args) {
        if (args.slice(1).join(' ') === 'make me a sandwich') {
          return `<span class="success">Okay, here's your sandwich! ü•™</span>`;
        }
        return `<span class="error">Nice try! But you're already root. üòâ</span>`;
      }
    };
    
    // Gestionnaire de commandes
    function handleCommand(cmd) {
      const trimmedCmd = cmd.trim();
      if (!trimmedCmd) {
        state.history.push(getPrompt().replace('<span class=\'cursor\'>&nbsp;</span>', '') + '\n');
        return;
      }
      
      // Ajouter √† l'historique des commandes
      state.commandHistory.push(trimmedCmd);
      if (state.commandHistory.length > CONFIG.maxHistorySize) {
        state.commandHistory.shift();
      }
      state.commandHistoryIndex = state.commandHistory.length;
      
      const args = trimmedCmd.split(/\s+/);
      const command = args[0];
      
      let output = '';
      if (commands[command]) {
        output = commands[command](args);
        if (output !== null) {
          state.history.push(getPrompt().replace('<span class=\'cursor\'>&nbsp;</span>', '') + '\n' + output + '\n');
        }
      } else {
        output = `<span class="error">Commande inconnue: ${utils.escapeHtml(command)}. Tapez 'help' pour l'aide.</span>`;
        state.history.push(getPrompt().replace('<span class=\'cursor\'>&nbsp;</span>', '') + '\n' + output + '\n');
      }
      
      // Limiter la taille de l'historique
      if (state.history.length > CONFIG.maxHistorySize) {
        state.history = state.history.slice(-CONFIG.maxHistorySize);
      }
    }
    
    // √âv√©nements
    state.inputEl.addEventListener('input', function(e) {
      state.input = state.inputEl.value;
      render();
    });
    
    state.formEl.addEventListener('submit', function(e) {
      e.preventDefault();
      handleCommand(state.input);
      state.input = '';
      render();
    });
    
    state.inputEl.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowUp') {
        e.preventDefault();
        if (state.commandHistoryIndex > 0) {
          state.commandHistoryIndex--;
          state.input = state.commandHistory[state.commandHistoryIndex] || '';
          state.inputEl.value = state.input;
          render();
        }
      } else if (e.key === 'ArrowDown') {
        e.preventDefault();
        if (state.commandHistoryIndex < state.commandHistory.length - 1) {
          state.commandHistoryIndex++;
          state.input = state.commandHistory[state.commandHistoryIndex] || '';
        } else {
          state.commandHistoryIndex = state.commandHistory.length;
          state.input = '';
        }
        state.inputEl.value = state.input;
        render();
      }
    });
    
    // Focus sur le terminal
    state.terminal.addEventListener('click', () => state.inputEl.focus());
    
    // Initialisation
    window.addEventListener('load', () => {
      runConnectionSequence();
    });
    
    // Garder le focus sur l'input
    document.addEventListener('click', (e) => {
      if (state.connected && !e.target.closest('a')) {
        state.inputEl.focus();
      }
    });
  </script>
</body>
</html>
